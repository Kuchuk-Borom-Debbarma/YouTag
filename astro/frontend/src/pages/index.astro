---
import Navbar from "../components/Navbar"
import type User from '../models/User'
import Videos from "../components/home/AllVideos.tsx"

// Dummy User for Navbar
const dummyUser: User = {
    name: 'john doe',
    email: 'john@example.com',
    thumbnailUrl: 'https://www.pngall.com/wp-content/uploads/5/Profile-Transparent.png'
}

const userTags: string[] = [
    "Web development",
    "Tutorial",
    "GitHub",
    "Programming",
    "Frontend",
    "Backend",
    "Machine Learning",
    "Data Science",
    "Cybersecurity",
    "Cloud Computing",
    "DevOps",
    "Mobile Development",
    "Artificial Intelligence",
    "Blockchain",
    "UX Design",
    "Software Engineering",
    "Network Security",
    "Database Management",
    "Game Development",
    "Quantum Computing"
]

// Tag Pagination setup
const tagPage = Number(Astro.url.searchParams.get('tagPage') || 1)
const tagsPerPage = 8
const startTagIndex = (tagPage - 1) * tagsPerPage
const endTagIndex = startTagIndex + tagsPerPage
const paginatedTags = userTags.slice(startTagIndex, endTagIndex)
const totalTagPages = Math.ceil(userTags.length / tagsPerPage)
---

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YOUTAG | Your Video Platform</title>
    <style>
        body {
            background-color: #0f0f0f;
            color: white;
            font-family: 'Arial', sans-serif;
        }

        .tag-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
            padding: 1rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        .tag-chip {
            background-color: #333;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            text-align: center;
            transition: background-color 0.3s;
            cursor: pointer;
        }

        .tag-chip:hover {
            background-color: #555;
        }

        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 2rem;
            gap: 0.5rem;
        }

        .pagination-btn {
            background-color: #333;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .pagination-btn:hover {
            background-color: #555;
        }

        .pagination-btn.active {
            background-color: #ff0000;
        }

        @media (max-width: 768px) {
            .tag-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
                gap: 0.5rem;
            }
        }
    </style>
</head>
<body>
<Navbar user={dummyUser}/>

<main>
    <h2 style="text-align: center; margin-top: 1rem;">All Tags</h2>
    <div class="tag-grid">
        {paginatedTags.map(tag => (
                <div class="tag-chip">{tag}</div>
        ))}
    </div>

    <div class="pagination">
        {tagPage > 1 && (
                <a href={`?tagPage=${tagPage - 1}`} class="pagination-btn">
                    Previous
                </a>
        )}

        {Array.from({length: totalTagPages}, (_, i) => i + 1).map(pageNum => (
                <a
                        href={`?tagPage=${pageNum}`}
                        class={`pagination-btn ${pageNum === tagPage ? 'active' : ''}`}
                >
                    {pageNum}
                </a>
        ))}

        {tagPage < totalTagPages && (
                <a href={`?tagPage=${tagPage + 1}`} class="pagination-btn">
                    Next
                </a>
        )}
    </div>

    <Videos client:load/>
</main>
</body>